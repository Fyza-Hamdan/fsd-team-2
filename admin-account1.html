<!-- ************************************************************************************************************************ 
     * Filename: admin-account1.html                                                                                        *
     * Objective: A multi-view Dashboard for Administrators to manage product categories, products and view order history.  *
     * Remarks: Generation SG Full Stack Developer FSD05 Capstone Project                                                   *
     * Developer: Raizal                                                                                                    *
     * Date: 20/12/2024                                                                                                     *
     ************************************************************************************************************************ -->

<!DOCTYPE html>
<html lang="en">
    <head>

        <!-- SITE TITLE -->
        <title>PetPurely - Administrator Dashboard</title>

        <!-- Meta -->
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalabe=true/">
        
        <!-- Favicon Icon -->
        <link rel="shortcut icon" type="image/x-icon" href="./assets/images/petperks_favicon.png">
        
        <!-- [CASCADING STYLE SHEETS (CSS)] -->

        <!-- Animation CSS -->
        <link rel="stylesheet" href="./assets/css/animate.css">	

        <!-- Latest Bootstrap min CSS -->
        <link rel="stylesheet" href="./assets/bootstrap/css/bootstrap.min.css">

        <!-- Google Font -->
        <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900&display=swap" rel="stylesheet"> 
        <link href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,500,600,700,800,900&display=swap" rel="stylesheet"> 

        <!-- Icon Font CSS -->
        <link rel="stylesheet" href="./assets/css/all.min.css">
        <link rel="stylesheet" href="./assets/css/ionicons.min.css">
        <link rel="stylesheet" href="./assets/css/themify-icons.css">
        <link rel="stylesheet" href="./assets/css/linearicons.css">
        <link rel="stylesheet" href="./assets/css/flaticon.css">
        <link rel="stylesheet" href="./assets/css/simple-line-icons.css">

        <!--- owl carousel CSS-->
        <link rel="stylesheet" href="./assets/owlcarousel/css/owl.carousel.min.css">
        <link rel="stylesheet" href="./assets/owlcarousel/css/owl.theme.css">
        <link rel="stylesheet" href="./assets/owlcarousel/css/owl.theme.default.min.css">

        <!-- Magnific Popup CSS -->
        <link rel="stylesheet" href="./assets/css/magnific-popup.css">

        <!-- Slick CSS -->
        <link rel="stylesheet" href="./assets/css/slick.css">
        <link rel="stylesheet" href="assets/css/slick-theme.css">

        <!-- Style CSS -->
        <link rel="stylesheet" href="./assets/css/style.css">
        <link rel="stylesheet" href="./assets/css/responsive.css">

         <!-- Customized Style CSS -->
         <link rel="stylesheet" href="./assets/css/pets_styles.css" type="text/css">

        <!-- End of CASCADING STYLE SHEETS (CSS) -->

        <style>
            body {
          /* padding: 2rem; */
            }
          </style>
                        
        </head>
<body onload="displayEmptyCart();displayLoginName();getLoginStatus();">

<!-- START HEADER -->
<header class="header_wrap fixed-top header_with_topbar">
    <div class="bottom_header dark_skin main_menu_uppercase">
    	<div class="container-fluid">
            <nav class="navbar navbar-expand-lg"> 
                <a class="navbar-brand" href="index.html">
                  
                   <!-- HEADER LOGO--> 
                      <img class="logo_light" src="./assets/images/logos/Logo side name - 310 x 220.png" alt="PetPurely Header Logo" />
                      <img class="logo_dark" src="./assets/images/logos/Logo side name - 310 x 220.png" alt="PetPurely Header Logo" />
                   <!-- End of Header Logo -->  
                    
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-expanded="false"> 
                    <span class="ion-android-menu"></span>
                </button>
                <div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent">
                    <ul class="navbar-nav">

                        <li class="dropdown">
                            <li><a class="nav-link nav_item" href="./index.html">Home</a></li> 
                        </li>

                        <li class="dropdown">
                            <li><a class="nav-link nav_item" href="./about.html">About Us</a></li> 
                        </li>

                        <li class="dropdown">
                            <a class="nav-link nav_item" href="./products.html">Products</a>        
                            
                            <div class="dropdown-menu dropdown-reverse">
                                    
                                <!-- Cats Category -->  
                                  <ul>
                                      <li>
                                          <a class="dropdown-item menu-link dropdown-toggler" href="#">Cats</a>
                                          <div class="dropdown-menu">
                                              <ul> 
                                                  <li><a class="dropdown-item nav-link nav_item" href="#">Food</a></li>
                                                  <li><a class="dropdown-item nav-link nav_item" href="#">Treats</a></li> 
                                                  <li><a class="dropdown-item nav-link nav_item" href="#">Boarding</a></li> 
                                                  <li><a class="dropdown-item nav-link nav_item" href="#">Funeral Service</a></li>
                                              </ul>
                                          </div>
                                      </li>
                                   </ul>
                                   <!-- End of Cats Category -->

                                  <!-- Dogs Category --> 
                                   <ul>
                                      <li>
                                          <a class="dropdown-item menu-link dropdown-toggler" href="#">Dogs</a>
                                          <div class="dropdown-menu">
                                              <ul> 
                                                  <li><a class="dropdown-item nav-link nav_item" href="#">Food</a></li>
                                                  <li><a class="dropdown-item nav-link nav_item" href="#">Treats</a></li> 
                                                  <li><a class="dropdown-item nav-link nav_item" href="#">Boarding</a></li> 
                                                  <li><a class="dropdown-item nav-link nav_item" href="#">Funeral Service</a></li>
                                              </ul>
                                          </div>
                                      </li>
                                   </ul>
                                 <!-- End of Dogs Category -->  

                                 <!-- Hamsters Category -->

                                   <ul>
                                      <li>
                                          <a class="dropdown-item menu-link dropdown-toggler" href="#">Hamsters</a>
                                          <div class="dropdown-menu">
                                              <ul> 
                                                  <li><a class="dropdown-item nav-link nav_item" href="#">Food</a></li>
                                                  <li><a class="dropdown-item nav-link nav_item" href="#">Treats</a></li> 
                                                  <li><a class="dropdown-item nav-link nav_item" href="#">Boarding</a></li> 
                                                  <li><a class="dropdown-item nav-link nav_item" href="#">Funeral Service</a></li>
                                              </ul>
                                          </div>
                                      </li>
                                   </ul>
                                 <!-- End of Hamsters Category -->  
                                 
                                 <!-- Parrots Category -->
                                   <ul>
                                      <li>
                                          <a class="dropdown-item menu-link dropdown-toggler" href="#">Parrots</a>
                                          <div class="dropdown-menu">
                                              <ul> 
                                                  <li><a class="dropdown-item nav-link nav_item" href="#">Food</a></li>
                                                  <li><a class="dropdown-item nav-link nav_item" href="#">Treats</a></li> 
                                                  <li><a class="dropdown-item nav-link nav_item" href="#">Boarding</a></li> 
                                                  <li><a class="dropdown-item nav-link nav_item" href="#">Funeral Service</a></li>
                                              </ul>
                                          </div>
                                      </li>
                                   </ul>
                              <!-- End of Parrots Category -->

                               </div>
                        </li>
                        
                        <li class="dropdown">
                            <li><a class="nav-link nav_item" href="#" onclick="alert('Sorry,this feature is still under development.');">Services</a></li> 
                        </li>
                        <!--<li><a class="nav-link nav_item" href="contact.html">Contact Us</a></li> -->
                    </ul>
                    <ul class="header_list">
                        <span><img id="account-image" src="./assets/images/accountPicture.png" alt="Avatar" width="30px" height="30px" onclick="window.location.href='./accountDashboard.html'"></span>
                        <li><a href="#"><!--<i class="ti-user"></i>--><span id="lnkLogin" onclick="window.localStorage.clear();window.location.href='./loginAdmin.html'">Login</span></a></li>
                    </ul>
                </div>
                <ul class="navbar-nav attr-nav align-items-center">
                    <li><a href="javascript:;" class="nav-link search_trigger"><i class="linearicons-magnifier"></i></a>
                        <div class="search_wrap">
                            <span class="close-search"><i class="ion-ios-close-empty"></i></span>
                            <form>
                                <input type="text" placeholder="Search" class="form-control" id="search_input">
                                <button type="submit" class="search_icon"><i class="ion-ios-search-strong"></i></button>
                            </form>
                        </div><div class="search_overlay"></div>
                    </li>
                    
                    <li class="dropdown cart_dropdown"><a class="nav-link cart_trigger" href="#" data-bs-toggle="dropdown"><i class="linearicons-cart"></i><span class="cart_count">0</span></a>
                            
                      <!-- Cart Box Dropdown Menu -->   
                         <div class="cart_box dropdown-menu dropdown-menu-right" id="viewCartItems">
                         
                           <!-- Cart List -->  
                             <ul class="cart_list">
                                 <li>
                                     <a href="#" class="item_remove"><i class="ion-close"></i></a>
                                     <a href="#"><img src="assets/images/cart_thamb1.jpg" id="imgListCart" alt="cart_thumb1"><span id="viewListCart">Variable product 001</span></a>
                                     <!--<span class="cart_quantity" id="drpDwnProductQuantity"> 1 x </span><span class="cart_amount"></span> <span class="price_symbole">$</span><span id="drpDwnProductPrice">78.00</span>-->
                                     <span class="cart_quantity" id="drpDwnProductQuantity"> 1 x </span><span class="price_symbole">$</span><span class="cart-amount" id="drpDwnProductPrice">78.00</span>
                                 </li>
                                 <!--<li>
                                     <a href="#" class="item_remove"><i class="ion-close"></i></a>
                                     <a href="#"><img src="assets/images/cart_thamb2.jpg" alt="cart_thumb2">Ornare sed consequat</a>
                                     <span class="cart_quantity"> 1 x <span class="cart_amount"> <span class="price_symbole">$</span></span>81.00</span>
                                 </li> -->
                             </ul>
                           <!-- End of Cart List -->    
                         
                           <!-- Cart Footer -->
                             <div class="cart_footer" >
                                 <p class="cart_total" id="cartListSubTotal"><strong>Subtotal:</strong><span class="price_symbole">$</span><span class="cart-price" id="drpDwnFooterProductPrice">78.00</span></p>
                                 <p class="cart_buttons"><a href="./addToCart.html" class="btn btn-fill-line view-cart">View Cart</a><a href="./checkout.html" class="btn btn-fill-out checkout">Checkout</a></p>
                             </div>
                           <!-- End of Cart Footer --> 
                             
                         </div>
                      <!-- End of Cart Box Dropdown Menu -->      
                     
                     </li>     
                </ul>
            </nav>
        </div>
    </div>
</header>
<!-- END HEADER -->

<!-- START SECTION BREADCRUMB -->

<div class="breadcrumb_section bg_gray page-title-mini">
    
    <div class="container-fluid">
        <!-- START CONTAINER -->
        <div class="row">
        	<div class="col-md-6">
                <div class="page-title">
            		<h1>Admin Dashboard</h1>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid m4-4">

<!-- PRODUCT CATEGORY  -->
   <!-- Categories Section -->
   <div class="d-flex justify-content-between align-items-center mb-3">
     <h4 id="prodCatTitle"><span onclick="window.location.href='./accountDashboard.html';">Account Dashboard</span>&nbsp;&nbsp;<span>Products Category</span></h4>
    <a href="./addProductCategory.html" class="btn btn-primary" title="Please click on this button to add a new Product Category.">Add New Category</a>
  </div>
  
  <!-- SUCCESS ALERT (initially hidden) for Category Deletions -->
  <div class="alert alert-success d-none" role="alert" id="deleteCategoryAlert">
    <!-- The success message will be inserted dynamically -->
  </div>

  <!-- Categories Table -->
  <table class="table table-bordered mb-5" id="categoryTable">
    <thead class="table-light">
      <tr>
        <th>Item</th>
        <th>Name</th>
        <th>Description</th>
        <th>Active</th>
        <th>Command</th>
      </tr>
    </thead>
    <tbody id="categoryTableBody">
      <!-- Dynamically inserted from localStorage -->
    </tbody>
  </table>
<!-- END OF PRODUCT CATEGORY -->

<!-- PRODUCTS -->
<div class="d-flex justify-content-between align-items-center mb-3">
    <h4 id="prodCatTitle"><span onclick="window.location.href='./accountDashboard.html';">Account Dashboard</span>&nbsp;&nbsp;<span>Products Details</span></h4>

    <!-- Link to the Add New Products page -->
    <a href="./addNewProduct.html" class="btn btn-primary">
      Add New Product
    </a>
  </div>

  <!-- SUCCESS ALERT (initially hidden) -->
  <div class="alert alert-success d-none" role="alert" id="deleteAlert">
    <!-- The success message will be inserted dynamically -->
  </div>

  <!-- Product Details Table -->
  <table class="table table-bordered" id="productTable">
    <thead class="table-light">
      <tr>
        <th>Item</th>
        <th>Image</th>
        <th>SKU</th>
        <th>Name</th>
        <th>Description</th>
        <th>Category</th>
        <th>Weight</th>
        <th>Price</th>
        <th>Supplier</th>
        <th>Command</th>
      </tr>
    </thead>
    <tbody id="productTableBody">
      <!-- Default or stored products will be inserted here by JavaScript -->
    </tbody>
  </table>
<!-- END OF PRODUCTS -->

 <!-- ORDER HISTORY -->
<h4>Order History</h4>
    <table class="table table-bordered table-striped text-start">
        <thead>
            <tr>
                <th class="text-center">Item</th>
                <th class="text-center">Order ID</th>
                <th class="text-center">Date</th>
                <th class="text-center">Image</th>
                <th class="text-center">Name</th>
                <th class="text-center">Quantity</th>
                <th class="text-center">Amount</th>
                <th class="text-center">User</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>1</td>
                <td>Order 123</td>
                <td>2024-12-17</td>
                <td><img src="product1.png" alt="Product 1"></td>
                <td>ABC</td>
                <td>1</td>
                <td>$18.00</td>
                <td>UserA</td>
            </tr>
            </tbody>
    </table>
    <nav aria-label="Page navigation">
        <ul class="pagination justify-content-end">
            <li class="page-item disabled">
                <a class="page-link" href="#" tabindex="-1" aria-disabled="true">«</a>
            </li>
            <li class="page-item active"><a class="page-link" href="#">1</a></li>
            <li class="page-item"><a class="page-link" href="#">2</a></li>
            <li class="page-item"><a class="page-link" href="#">3</a></li>
            <li class="page-item"><a class="page-link" href="#">4</a></li>
            <li class="page-item"><a class="page-link" href="#">5</a></li>
            <li class="page-item">
                <a class="page-link" href="#">»</a>
            </li>
        </ul>
    </nav>
</div>

    <!-- START FOOTER -->
<footer class="footer_dark">
	<div class="footer_top">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-3 col-md-6 col-sm-12">
                	<div class="widget">
                        <div class="footer_logo">  
                            <a href="#"><img src="assets/images/logos/Logo bottom name - 100 x 100.png" alt="PetPurely Footer logo"/></a>
                        </div>
                        <p>If you are going to use of Lorem Ipsum need to be sure there isn't hidden of text</p>
                    </div>
                    <div class="widget">
                        <ul class="social_icons social_white">
                            <li><a href="#"><i class="ion-social-facebook"></i></a></li>
                            <li><a href="#"><i class="ion-social-twitter"></i></a></li>
                            <li><a href="#"><i class="ion-social-googleplus"></i></a></li>
                            <li><a href="#"><i class="ion-social-youtube-outline"></i></a></li>
                            <li><a href="#"><i class="ion-social-instagram-outline"></i></a></li>
                        </ul>
                    </div>
        		</div>

                <div class="col-lg-2 col-md-3 col-sm-6">
                	<div class="widget">
                        <h6 class="widget_title">Useful Links</h6>
                        <ul class="widget_links">
                            <li><a href="./about.html">About Us</a></li>
                            <li><a href="./faq.html">FAQ</a></li>
                            <li><a href="#" onclick="alert('Sorry,this feature is still under development.');">Blog</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6">
                	<div class="widget">
                        <h6 class="widget_title">Category</h6>
                        <ul class="widget_links">
                            <li><a href="#" onclick="alert('Sorry,this feature is still under development.');">Dogs</a></li>
                            <li><a href="#" onclick="alert('Sorry,this feature is still under development.');">Cats</a></li>
                            <li><a href="#" onclick="alert('Sorry,this feature is still under development.');">Parrots</a></li>                            
                        </ul>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4 col-sm-6">
                	<div class="widget">
                        <h6 class="widget_title">Contact Info</h6>
                        <ul class="contact_info contact_info_light">
                            <li>
                                <i class="ti-location-pin"></i>
                                <p>123 Street, Old Trafford, New South London , UK</p>
                            </li>
                            <li>
                                <i class="ti-email"></i>
                                <a href="mailto:sales@sitename.com">sales@sitename.com</a>
                            </li>
                            <li>
                                <i class="ti-mobile"></i>
                                <p>+ 457 789 789 65</p>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="bottom_footer border-top-tran">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <p class="mb-md-0 text-center text-md-start"><center>Copyright © 2024. <a href="./index.html"><span style="color:yellow">PetPurely eCommerce Ltd.</span></a> All Rights Reserved.</p></center>
                </div>
            </div>
        </div>
    </div>
</footer>
<!-- END FOOTER -->

  <a href="#" class="scrollup" style="display: none;"><i class="ion-ios-arrow-up"></i></a> 

    <!-- [JAVASCRIPT] -->

    <script>

      // [PRODUCT CATEGORY]
      //-------------------

      // ================================================
      // 1) On page load, load categories from localStorage
      // ================================================
      
      window.addEventListener("load", () => 
      {
        const defaultCategories = [
          {
            name: "Pet Food",
            description: "Lorem ipsum dolor sit amet",
            active: true
          },
          {
            name: "Pet Accessories",
            description: "Lorem ipsum dolor sit amet",
            active: true
          },
          {
            name: "Pet Toys",
            description: "Lorem ipsum dolor sit amet",
            active: true
          }
        ];
    
        // Fetch categories
        let storedCategories = JSON.parse(localStorage.getItem("categories"));
        
        if(!storedCategories || storedCategories.length === 0) 
        {
          storedCategories = defaultCategories;
          localStorage.setItem("categories", JSON.stringify(storedCategories));
        } // End of if statement
        
        // Display categories
        displayCategories(storedCategories);
    
        // (Optional) Also load products if needed:
        // ...
      }); // End of window.addEventListener()
    
      // ================================================
      // 2) Display categories in the categories table
      // ================================================
      
      function displayCategories(categoryList) 
      {
        const categoryTableBody = document.getElementById("categoryTableBody");
        categoryTableBody.innerHTML = "";
    
        categoryList.forEach((cat, index) => {
          const itemNumber = index + 1;
          const row = document.createElement("tr");
    
          // ITEM
          const tdItem = document.createElement("td");
          tdItem.textContent = itemNumber + ".";
          row.appendChild(tdItem);
    
          // NAME
          const tdName = document.createElement("td");
          tdName.textContent = cat.name || "";
          row.appendChild(tdName);
    
          // DESCRIPTION
          const tdDescription = document.createElement("td");
          tdDescription.textContent = cat.description || "";
          row.appendChild(tdDescription);
    
          // ACTIVE
          const tdActive = document.createElement("td");
          tdActive.innerHTML = cat.active
            ? '<span style="font-size: 1.5rem;">&#10003;</span>'
            : "";
          row.appendChild(tdActive);
    
          // COMMAND
          const tdCommand = document.createElement("td");
          tdCommand.innerHTML = `
            <button class="btn btn-success btn-update-category" data-index="${index}">Update</button>
            <button class="btn btn-danger btn-delete-category" data-index="${index}">Delete</button>
          `;
          row.appendChild(tdCommand);
    
          categoryTableBody.appendChild(row);
        });
    
        attachCategoryEventListeners();
      } // End of function displayCategories(categoryList) 
    
      // ================================================
      // 3) Attach events for Update and Delete
      // ================================================
      function attachCategoryEventListeners() 
      {
        // Update
        const updateButtons = document.querySelectorAll(".btn-update-category");
        updateButtons.forEach((btn) => {
          btn.addEventListener("click", (e) => {
            const categoryIndex = e.target.getAttribute("data-index");
            localStorage.setItem("updateCategoryIndex", categoryIndex);
            window.location.href = "./updateProductCategory.html";
          });
        });
    
        // Delete
        const deleteButtons = document.querySelectorAll(".btn-delete-category");
        deleteButtons.forEach((btn) => {
          btn.addEventListener("click", (e) => {
            const categoryIndex = e.target.getAttribute("data-index");
            handleDeleteCategory(categoryIndex);
          });
        });
      } // End of function attachCategoryEventListeners() 
    
      // ================================================
      // 4) Handle Delete with confirmation
      // ================================================
      function handleDeleteCategory(index) 
      {
        let storedCategories = JSON.parse(localStorage.getItem("categories")) || [];
        const categoryToDelete = storedCategories[index];
    
        if(!categoryToDelete) 
        {
          alert("Category not found or invalid index.");
          return;
        } // End of if statement
    
        // Confirm deletion from user
        const confirmDelete = confirm(
          `Are you sure you want to delete the category "${categoryToDelete.name}"?`
        );
        
        if(!confirmDelete) 
        {
          return; // user canceled
        } // End of if statement
    
        // Remove category from array
        storedCategories.splice(index, 1);
        localStorage.setItem("categories", JSON.stringify(storedCategories));
    
        // Update the table display
        displayCategories(storedCategories);
    
        // Show success alert for category deletion
        const deleteCatAlert = document.getElementById("deleteCategoryAlert");
        deleteCatAlert.textContent = `Category "${categoryToDelete.name}" has been successfully deleted!`;
        deleteCatAlert.classList.remove("d-none");
      } // End of function handleDeleteCategory(index) 

  // 1) On page load, retrieve stored products or use default
  window.addEventListener("load", () => {
    const defaultProducts = [
      {
        imageURL: "https://via.placeholder.com/50",
        sku: "PET1234",
        name: "Product A",
        description: "Lorem ipsum dolor sit amet",
        category: "Pets Food",
        weight: "200 g",
        price: "$15.00",
        supplier: "ABC Company Pte. Ltd."
      },
      {
        imageURL: "https://via.placeholder.com/50",
        sku: "PET1235",
        name: "Product B",
        description: "Lorem ipsum dolor sit amet",
        category: "Pets Food",
        weight: "500 g",
        price: "$18.00",
        supplier: "DEF Company Pte. Ltd."
      },
      {
        imageURL: "https://via.placeholder.com/50",
        sku: "PET1236",
        name: "Product C",
        description: "Lorem ipsum dolor sit amet",
        category: "Pets Food",
        weight: "1 kg",
        price: "$28.00",
        supplier: "GHI Company Pte. Ltd."
      }
    ];

    let storedProducts = JSON.parse(localStorage.getItem("products"));
    if (!storedProducts || storedProducts.length === 0) {
      storedProducts = defaultProducts;
      localStorage.setItem("products", JSON.stringify(storedProducts));
    }

    displayProducts(storedProducts);
  });

  // 2) Display function for all products
  function displayProducts(productList) {
    const productTableBody = document.getElementById("productTableBody");
    productTableBody.innerHTML = "";

    productList.forEach((product, index) => {
      const itemNumber = index + 1;
      const row = document.createElement("tr");

      // ITEM
      const tdItem = document.createElement("td");
      tdItem.textContent = itemNumber + ".";
      row.appendChild(tdItem);

      // IMAGE
      const tdImage = document.createElement("td");
      if (product.imageURL) {
        tdImage.innerHTML = `
          <img src="${product.imageURL}" alt="${product.name}" width="50" height="50" />
          <br/>
          ${product.name}
        `;
      } else {
        tdImage.innerHTML = `No Image <br/> ${product.name}`;
      }
      row.appendChild(tdImage);

      // SKU
      const tdSKU = document.createElement("td");
      tdSKU.textContent = product.sku || "";
      row.appendChild(tdSKU);

      // Name
      const tdName = document.createElement("td");
      tdName.textContent = product.name || "";
      row.appendChild(tdName);

      // Description
      const tdDescription = document.createElement("td");
      tdDescription.textContent = product.description || "";
      row.appendChild(tdDescription);

      // Category
      const tdCategory = document.createElement("td");
      tdCategory.textContent = product.category || "";
      row.appendChild(tdCategory);

      // Weight
      const tdWeight = document.createElement("td");
      tdWeight.textContent = product.weight || "";
      row.appendChild(tdWeight);

      // Price
      const tdPrice = document.createElement("td");
      tdPrice.textContent = product.price || "";
      row.appendChild(tdPrice);

      // Supplier
      const tdSupplier = document.createElement("td");
      tdSupplier.textContent = product.supplier || "";
      row.appendChild(tdSupplier);

      // Command (Update / Delete)
      const tdCommand = document.createElement("td");
      tdCommand.innerHTML = `
        <button class="btn btn-success btn-update" data-index="${index}">Update</button>
        <button class="btn btn-danger btn-delete" data-index="${index}">Delete</button>
      `;
      row.appendChild(tdCommand);

      productTableBody.appendChild(row);
    });

    // After rendering, attach event listeners for Update and Delete
    attachEventListeners();
  }

  // 3) Attach event listeners to Update and Delete buttons
  function attachEventListeners() {
    // -- Update Buttons (existing behavior) --
    const updateButtons = document.querySelectorAll(".btn-update");
    updateButtons.forEach((btn) => {
      btn.addEventListener("click", (e) => {
        const productIndex = e.target.getAttribute("data-index");
        localStorage.setItem("updateIndex", productIndex);
        window.location.href = "./updateProduct.html";
      });
    });

    // -- Delete Buttons --
    const deleteButtons = document.querySelectorAll(".btn-delete");
    deleteButtons.forEach((btn) => {
      btn.addEventListener("click", (e) => {
        const productIndex = e.target.getAttribute("data-index");
        handleDelete(productIndex);
      });
    });
  }

  // 4) Handle Delete with confirmation
  function handleDelete(index) {
    const storedProducts = JSON.parse(localStorage.getItem("products")) || [];
    const productToDelete = storedProducts[index];

    if (!productToDelete) {
      alert("Product not found or invalid index.");
      return;
    }

    // Confirm deletion from user
    const confirmDelete = confirm(
      `Are you sure you want to delete "${productToDelete.name}"?`
    );
    if (!confirmDelete) {
      return; // user cancelled
    }

    // Remove product from array
    storedProducts.splice(index, 1);
    localStorage.setItem("products", JSON.stringify(storedProducts));

    // Update the table display
    displayProducts(storedProducts);

    // Show success alert
    const deleteAlert = document.getElementById("deleteAlert");
    deleteAlert.textContent = `Product "${productToDelete.name}" has been successfully deleted!`;
    deleteAlert.classList.remove("d-none");
  }
 
  </script>

<!-- Latest jQuery --> 
<script src="./assets/js/jquery-3.7.1.min.js"></script>

<!-- popper min js -->
<script src="./assets/js/popper.min.js"></script>

<!-- Latest compiled and minified Bootstrap --> 
<script src="./assets/bootstrap/js/bootstrap.min.js"></script>

<!-- owl-carousel min js  --> 
<script src="./assets/owlcarousel/js/owl.carousel.min.js"></script>

<!-- magnific-popup min js  --> 
<script src="./assets/js/magnific-popup.min.js"></script>

<!-- waypoints min js  --> 
<script src="./assets/js/waypoints.min.js"></script>

<!-- parallax js  --> 
<script src="./assets/js/parallax.js"></script>

<!-- countdown js  --> 
<script src="./assets/js/jquery.countdown.min.js"></script>

<!-- imagesloaded js --> 
<script src="./assets/js/imagesloaded.pkgd.min.js"></script>

<!-- isotope min js --> 
<script src="./assets/js/isotope.min.js"></script>

<!-- jquery.dd.min js -->
<script src="./assets/js/jquery.dd.min.js"></script>

<!-- slick js -->
<script src="./assets/js/slick.min.js"></script>

<!-- elevatezoom js -->
<script src="./assets/js/jquery.elevatezoom.js"></script>

<!-- scripts js --> 
<script src="./assets/js/scripts.js"></script>

<!-- Custom Javascript -->
<script defer src="./assets/js/pets_scripts.js"></script>

<!-- End of Javascript -->

  
   </body>
</html>